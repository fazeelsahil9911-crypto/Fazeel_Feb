Day 20 - Security, Hardening, and Complaince
    Ansible - Configure Firewall with iptables
- name: Configure Firewall with iptables
  hosts: all
  become: yes
  tasks:
    - name: Set default policies to drop all traffic
      command: iptables -P INPUT DROP
    - name: Allow SSH and HTTP traffic
      command: iptables -A INPUT -p tcp --dport 22 -j ACCEPT
      command: iptables -A INPUT -p tcp --dport 80 -j ACCEPT
    - name: Save iptables configuration
      command: service iptables save
   Terraform - Configure Security Gruops for EC2
resource "aws_security_group" "pathnex_sg" {
  name_prefix = "pathnex-sg-"
  description = "Allow SSH and HTTP"

  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }
}
   Kubernetes - RBAC Configuration for Access Control
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: pathnex-cluster-admin
subjects:
  - kind: User
    name: pathnex-user
    apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: Cluster-admin
  apiGroup: rbac.authorization.k8s.io
   JenkinsFile - Secure Credentials Management 
Pipeline {
    agent any
    environment {
        REGISTRY_PASSWORD = credentials('docker-registy-password')
    }
    stages {
        stage('Build') {
            steps {
                echo 'Building Docker image...'
                docker.build('pathnex-web-app')
            }
        }
        stage('Push') {
            steps {
                script {
                    docker,withRegistry('https://docker.io, 'docker-credentials') {
                        docker.image('pathnex-web-app').push('latest')
                    }
                }
            }
        }
    }
}
   GitLab CI/CD - Secure Deployment with Secrets Management 
Stages:
  - build 
  - push
  - deploy

build:
  stage: build
  script:
    - docker build -t pathnex-web-app .

push:
  stage: push
  script:
    - docker login -u "$CI_REGISTRY_USER" -p "$CI_REGISTRY_PASSWORD"
    - docker push pathnex-web-app

deploy:
  stage: deploy
  script:
    - kubectl apply -f kubernetes/deployment.yaml
    - kubectl get pods --watch
