# Day 23 - Serverless Architecture and Microservices
    Ansible - Deploy Lambda Functions Using AWS CLI
- name: Deploy AWS Lambda Function
  hosts: localhost
  tasks:
    - name: Create Lambda function
      command: aws lambda create-function --function-name pathnex-lambda --runtime python3.8 --role arn:aws:iam::123456789012:role/lambda-execution-role --handler lambda_function.lambda_handler --zip-file fileb://lambda.zip
    Terraform - Serverless API Gateway with Lambda Integration
resource "aws_api_gateway_rest_api" "pathnex_api" {
  name         = "Pathnex-api"
  description  = "Pathnex API"
}

resource "aws_lambda_function" "pathnex_lambda" {
  function_name = "pathnex-lambda"
  runtime       = "python3.8"
  role          = aws_iam_role.lambda_exec_role.arn
  handler       = "lambda_function.lambda_handler"
  filename      = "lambda.zip"
}

resource "aws_api_gateway_integration" "lambda_integration" {
  rest_api_id = aws_api_gateway_rest_api.pathnex_api.id
  resource_id = aws_api_gateway_resource.pathnex_resource.id
  http_method = aws_api_gateway_method.pathnex_method.http_method
  integration_http_method = "POST"
  type = "AWS_PROXY"
  uri  = aws_lambda_function.pathnex_lambda.invoke_arn
}
   Kubernetes - Deploy Microservices Using Helm
helm install pathnex-microservice ./microservice-chart
   jenkinsfile - Deploy Serverless Applications with Lambda
pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                echo 'Building Lambda function...'
                sh 'zip -r lambda.zip lambda/'
            }
        }
        stage('Deploy to AWS Lambda') {
            steps {
                script {
                    sh 'aws lambda update-function-code --function-name pathnex-lambda --zip-file fileb://lambda.zip'
                }
            }
        }
    }
}
   GitLab CI/CD - Deploy Lambda Function
stages:
  - build
  - deploy

build:
  stage: build
  script:
    - zip -r lambda.zip lambda/

deploy:
  stage: deploy
  script:
    - aws lambda update-function-code --function-name pathnex-lambda --zip-file fileb://lambda.zip
}
